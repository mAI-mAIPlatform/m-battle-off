<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>mBattle v1.5.4 - Season 3 Update</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/css/style.css">
    <!-- FontAwesome for stylish icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="gas-overlay"></div>
    <div id="vignette"></div>
    <div id="flash-layer"></div>
    <div id="season-particles" class="absolute inset-0 pointer-events-none overflow-hidden z-0"></div>
    <div id="ui-layer" class="absolute inset-0 pointer-events-none overflow-hidden z-10">
        <div id="hud" class="hidden w-full h-full relative">
            <div class="absolute top-4 left-4 flex flex-col gap-4 pointer-events-auto">
                <div class="glass-panel p-2 flex items-center gap-3 pr-4 scale-90 origin-top-left md:scale-100">
                    <div class="relative">
                        <div class="w-14 h-14 rounded-xl bg-gray-900 border border-white/20 flex items-center justify-center text-2xl shadow-lg overflow-hidden">
                            <span id="hud-icon" class="z-10 relative">ğŸ¤–</span>
                            <div class="absolute inset-0 bg-gradient-to-br from-blue-600/40 to-transparent"></div>
                        </div>
                        <div class="absolute -bottom-2 -right-1 bg-black border border-gray-600 text-[9px] px-1.5 py-0.5 rounded text-yellow-400 font-bold" id="hud-lvl">LVL 1</div>
                    </div>

                    <div class="flex flex-col w-28 gap-1">

                        <div class="h-2.5 bg-gray-800 rounded-full overflow-hidden border border-gray-600 relative"><div id="hud-hp-bar" class="h-full bg-green-500" style="width: 100%;"></div></div>
                        <div class="flex gap-1 h-1 mt-0.5">
                            <div id="ammo-1" class="flex-1 bg-orange-500 rounded-full opacity-50 transition"></div>
                            <div id="ammo-2" class="flex-1 bg-orange-500 rounded-full opacity-50 transition"></div>
                            <div id="ammo-3" class="flex-1 bg-orange-500 rounded-full opacity-50 transition"></div>
                        </div>
                    </div>
                </div>
                <div class="glass-panel p-1 border-white/20 bg-black/50"><canvas id="minimap" width="100" height="100" class="rounded-lg bg-black/80 opacity-90"></canvas></div>
            </div>
            <div class="absolute top-6 left-1/2 -translate-x-1/2 text-center pointer-events-auto">
                <div id="hud-score" class="font-tech text-5xl font-bold text-white leading-none drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]">0</div>
                <div class="text-[10px] font-bold text-blue-400 bg-black/50 px-2 rounded mt-1" id="hud-sub">VAGUE 1</div>
                <div id="hud-timer" class="text-xl font-black text-yellow-400 drop-shadow-lg mt-1 hidden">03:00</div>
                <div id="hud-objective" class="text-xs font-bold text-yellow-300 mt-1 hidden">Objectif</div>
            </div>
            <div class="absolute top-4 right-4 flex flex-col gap-4 pointer-events-auto items-end">
                <button onclick="window.game.togglePause()" class="glass-panel w-10 h-10 flex items-center justify-center hover:bg-white/10 text-lg transition active:scale-90">â¸</button>
            </div>
            <div id="boss-ui" class="hidden absolute top-24 left-1/2 -translate-x-1/2 w-3/4 max-w-lg pointer-events-auto transition-all duration-500">
                <div class="flex justify-between text-[10px] text-red-400 font-bold mb-1 uppercase tracking-widest"><span id="boss-name">BOSS</span><span id="boss-pct">100%</span></div>
                <div class="h-4 bg-red-950/80 border border-red-500/50 rounded-full overflow-hidden shadow-[0_0_20px_rgba(220,38,38,0.4)]"><div id="boss-bar" class="h-full bg-gradient-to-r from-red-600 to-red-500 w-full transition-all duration-200"></div></div>
            </div>
            <div id="kill-feed" class="absolute top-32 left-4 flex flex-col gap-2 w-48 pointer-events-none"></div>
            <div id="notif-area" class="absolute top-48 left-1/2 -translate-x-1/2 pointer-events-none flex flex-col items-center gap-2 w-full z-30"></div>
            <button id="btn-emote" class="absolute top-32 right-4 w-10 h-10 rounded-full glass-panel flex items-center justify-center text-xl pointer-events-auto active:scale-90 transition z-50" onmousedown="window.ui.toggleEmoteWheel()" ontouchstart="event.stopPropagation(); window.ui.toggleEmoteWheel()">ğŸ˜€</button>
            <div id="emote-wheel" class="emote-wheel hidden"></div>
            <div id="mobile-controls" class="hidden absolute inset-0 z-40">
                <div id="stick-left-base" class="stick-base" style="left: 40px; bottom: 40px;"><div class="stick-knob"></div></div>
                <div id="stick-right-base" class="stick-base" style="right: 40px; bottom: 40px;"><div class="stick-knob"></div></div>
                <button id="btn-gadget" class="action-btn bottom-36 right-12 w-16 h-16 bg-green-900/90 border-2 border-green-500 active:scale-90 flex items-center justify-center pointer-events-auto transition shadow-lg" ontouchstart="event.stopPropagation(); window.game.player?.useGadget()" onmousedown="window.game.player?.useGadget()"><span class="font-tech font-bold text-[10px] z-10">GADGET</span><div class="absolute -top-1 -right-1 bg-black border border-white text-[9px] w-5 h-5 rounded-full flex items-center justify-center" id="gadget-count">3</div></button>
                <button id="btn-dash" class="action-btn bottom-12 right-36 w-20 h-20 rounded-full glass-panel border border-white/40 active:scale-90 flex items-center justify-center pointer-events-auto transition shadow-lg bg-blue-900/30" ontouchstart="event.stopPropagation(); window.game.player?.dash()" onmousedown="window.game.player?.dash()"><span class="text-3xl">âš¡</span><div id="dash-cd" class="absolute inset-0 bg-black/70 origin-bottom h-0 transition-all duration-75 rounded-full"></div></button>
            </div>
        </div>
        
        <div id="gameover-screen" class="hidden absolute inset-0 z-[90] flex flex-col items-center justify-center bg-black/80 backdrop-blur-md pointer-events-auto">
            <h1 id="go-title" class="text-8xl font-black text-white mb-2 drop-shadow-2xl tracking-tighter">KO</h1>
            <div id="go-reason" class="text-2xl text-red-500 font-bold uppercase tracking-widest mb-8">ELIMINÃ‰</div>
            <div class="flex flex-col items-center gap-4 mb-8">
                <div class="glass-panel px-8 py-4 flex flex-col items-center">
                    <div class="text-[10px] text-gray-400 uppercase font-bold text-center mb-1">SCORE TOTAL</div>
                    <div id="go-score" class="text-5xl font-black text-white">0</div>
                </div>
                <div id="go-rewards" class="text-xl font-bold text-yellow-400 animate-pulse"></div>
            </div>
            <button onclick="window.game.toMenu()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-12 rounded-2xl shadow-lg active:scale-95 transition text-xl relative overflow-hidden group">
                <span class="relative z-10">CONTINUER</span>
                <div class="absolute inset-0 bg-white/20 blur-xl opacity-0 group-hover:opacity-100 transition duration-500"></div>
            </button>
        </div>

        <div id="intro-screen" class="absolute inset-0 z-[100] bg-black flex flex-col items-center justify-center pointer-events-auto transition-opacity duration-1000 hidden">
            <div class="intro-bg absolute inset-0 opacity-50"></div>
            <div class="relative z-10 flex flex-col items-center animate-popIn">
                <h1 class="text-7xl md:text-9xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-500 to-yellow-600 mb-4 intro-text">mBATTLE</h1>
                <div class="text-xl md:text-2xl font-bold text-white tracking-[1em] uppercase animate-pulse">Saison 3</div>
                <div class="mt-2 text-yellow-400 font-mono text-sm">TOURNOI D'ORAGE</div>
            </div>
        </div>

        <div id="menu-screen" class="absolute inset-0 menu-anim pointer-events-auto z-50 flex flex-col">
            <div class="w-full h-16 flex items-center justify-between px-5 pt-safe z-30 bg-gradient-to-b from-black/80 to-transparent">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg bg-yellow-500/20 border border-yellow-400/30 flex items-center justify-center text-xl text-yellow-400">âš¡</div>
                    <div><div class="font-tech font-bold leading-none text-lg">mBATTLE</div><div class="text-[10px] text-yellow-400 font-bold tracking-widest">v1.5.3</div></div>
                </div>
                <div class="flex gap-3">
                    <div class="currency-badge"><i class="fa-solid fa-coins text-yellow-400"></i> <span id="top-coins">0</span></div>
                    <div class="currency-badge"><i class="fa-solid fa-gem text-purple-400"></i> <span id="top-gems">0</span></div>
                </div>
            </div>
            <div class="flex-1 overflow-y-auto safe-pb p-5 hide-scrollbar relative">
                <div id="tab-play" class="tab-content flex flex-col items-center justify-center min-h-[65vh] gap-6 animate-fadeIn pb-40">
                    <div onclick="window.ui.openTrophyRoad()" class="w-full max-w-md glass-panel p-5 border-l-4 border-cyan-500 bg-cyan-900/10 relative overflow-hidden cursor-pointer active:scale-95 transition hover:brightness-110">
                        <div class="flex items-center justify-between mb-2 relative z-10">
                            <div><div class="text-[10px] text-gray-400 uppercase font-bold">Rang Actuel</div><div class="text-2xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-cyan-200 to-cyan-500 font-tech" id="menu-rank">BRONZE I</div></div>
                            <div class="text-center"><div class="text-2xl"><i class="fa-solid fa-trophy text-yellow-500"></i></div><div class="font-bold text-white text-xl" id="menu-trophies">0</div></div>
                        </div>
                        <div class="flex justify-between text-[10px] font-bold text-gray-300 mt-1 relative z-10">
                            <span id="rank-progress-text">Encore 100 ğŸ† avant BRONZE II</span><span id="rank-progress-pct">0%</span>
                        </div>
                        <div class="rank-progress-bg relative z-10"><div id="rank-progress-fill" class="rank-progress-fill bg-cyan-500"></div></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 w-full max-w-md">
                        <div onclick="window.ui.showTab('starters')" class="glass-panel p-4 flex flex-col items-center justify-center aspect-square active:scale-95 transition bg-blue-900/10 border-blue-500/30">
                            <div class="text-[10px] text-blue-300 font-bold mb-2 uppercase">HÃ©ros</div><div class="text-5xl mb-2 drop-shadow-xl" id="play-icon">ğŸ¯</div><div class="font-black text-lg leading-none" id="play-starter">Soldier</div>
                        </div>
                        <div onclick="window.ui.showTab('modes')" class="glass-panel p-4 flex flex-col items-center justify-center aspect-square active:scale-95 transition bg-purple-900/10 border-purple-500/30">
                            <div class="text-[10px] text-purple-300 font-bold mb-2 uppercase">Mission</div><div class="text-5xl mb-2 drop-shadow-xl" id="play-mode-icon">ğŸ”¥</div><div class="font-black text-lg leading-none" id="play-mode">Survie</div>
                        </div>
                    </div>
                    <!-- NOUVEAU BOUTON MAP MAKER -->
                    <div onclick="window.ui.startMapMaker()" class="w-full max-w-md glass-panel p-3 mt-4 flex items-center justify-between cursor-pointer active:scale-95 transition hover:bg-white/5 border-green-500/30">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸ—ï¸</div>
                            <div><div class="font-bold text-green-400">CRÃ‰ATIF</div><div class="text-[10px] text-gray-400">CrÃ©e ton propre terrain</div></div>
                        </div>
                        <div class="text-2xl text-gray-600">âœ</div>
                    </div>
                    <div class="w-full max-w-md mt-4 flex flex-col gap-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- DIFFICULTY FRAME -->
                            <div class="glass-panel p-4 flex flex-col items-center justify-between">
                                <div class="text-[10px] text-yellow-300 font-bold mb-3 uppercase tracking-widest">DIFFICULTÃ‰</div>
                                <div class="grid grid-cols-2 gap-2 w-full">
                                    <button id="diff-easy" onclick="window.game.setDifficulty('easy')" style="--tw-shadow-color:#22c55e;" class="diff-btn flex-1 glass-btn py-3 rounded-xl font-bold text-sm bg-gradient-to-r from-green-600/30 to-green-900/30 border-green-600/50 text-green-400 active:scale-95 transition">Facile</button>
                                    <button id="diff-normal" onclick="window.game.setDifficulty('normal')" style="--tw-shadow-color:#3b82f6;" class="diff-btn flex-1 glass-btn py-3 rounded-xl font-bold text-sm bg-gradient-to-r from-blue-600/30 to-blue-900/30 border-blue-600/50 text-blue-400 active:scale-95 transition">Normal</button>
                                    <button id="diff-hard" onclick="window.game.setDifficulty('hard')" style="--tw-shadow-color:#ef4444;" class="diff-btn flex-1 glass-btn py-3 rounded-xl font-bold text-sm bg-gradient-to-r from-red-600/30 to-red-900/30 border-red-600/50 text-red-400 active:scale-95 transition">Difficile</button>
                                    <button id="diff-expert" onclick="window.game.setDifficulty('expert')" style="--tw-shadow-color:#a855f7;" class="diff-btn flex-1 glass-btn py-3 rounded-xl font-bold text-sm bg-gradient-to-r from-purple-600/30 to-purple-900/30 border-purple-600/50 text-purple-400 active:scale-95 transition">Expert</button>
                                </div>
                            </div>
                            
                            <!-- BOTS FRAME (Target JS) -->
                            <div id="bot-selector-target" class="glass-panel p-4 flex flex-col items-center justify-center">
                                <!-- JS INJECTS HERE -->
                            </div>
                        </div>

                        <!-- MODIFIERS FRAME -->
                        <div class="glass-panel p-4 flex flex-col items-center">
                            <div class="text-[10px] text-purple-300 font-bold mb-2 uppercase tracking-widest">MODIFICATEURS</div>
                            <div class="grid grid-cols-3 gap-2 w-full">
                                <button onclick="window.game.setModifier('normal')" id="mod-normal" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-gray-300">Classique</button>
                                <button onclick="window.game.setModifier('oneshot')" id="mod-oneshot" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-red-400">â˜ ï¸ One Shot</button>
                                <button onclick="window.game.setModifier('poison')" id="mod-poison" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-green-400">ğŸ§ª Poison</button>
                                <button onclick="window.game.setModifier('speed')" id="mod-speed" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-yellow-400">âš¡ Speed</button>
                                <button onclick="window.game.setModifier('vampire')" id="mod-vampire" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-pink-500">ğŸ§› Vampire</button>
                                <button onclick="window.game.setModifier('infinite')" id="mod-infinite" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-blue-400">â™¾ï¸ Infini</button>
                                <button onclick="window.game.setModifier('explosive')" id="mod-explosive" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-orange-500">ğŸ’¥ Explosif</button>
                                <button onclick="window.game.setModifier('recoil')" id="mod-recoil" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-white">ğŸ”™ Recul</button>
                                <button onclick="window.game.setModifier('giant')" id="mod-giant" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-purple-600">ğŸ˜ GÃ©ant</button>
                                <button onclick="window.game.setModifier('blind')" id="mod-blind" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-gray-500">ğŸŒ‘ Aveugle</button>
                                <button onclick="window.game.setModifier('slow_mo')" id="mod-slow_mo" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-blue-300">ğŸŒ Slow Mo</button>
                                <button onclick="window.game.setModifier('chaos')" id="mod-chaos" class="mod-btn glass-btn py-2 rounded-lg font-bold text-[10px] text-purple-500">ğŸ² Chaos</button>
                            </div>
                        </div>
                    </div>
                    <button onclick="window.game.start()" class="btn-shine w-full max-w-md bg-gradient-to-r from-blue-600 to-indigo-600 h-20 rounded-2xl shadow-[0_0_40px_rgba(37,99,235,0.4)] flex items-center justify-center gap-4 active:scale-95 transition transform hover:-translate-y-1 mt-4 border border-white/20 hover:shadow-[0_0_60px_rgba(37,99,235,0.6)] hover:from-blue-500 hover:to-indigo-500 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-white/20 blur-xl opacity-0 group-hover:opacity-100 transition duration-700 animate-pulse"></div>
                        <span class="text-3xl font-black italic tracking-tighter relative z-10">JOUER</span><span class="text-2xl animate-bounce relative z-10">ğŸš€</span>
                    </button>
                </div>
                <div id="tab-pass" class="tab-content hidden animate-fadeIn w-full max-w-5xl mx-auto pb-40">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-3xl font-black flex items-center gap-2 font-tech"><span class="text-cyan-400">///</span> mPASS</h2>
                        <!-- TITRE S2 ANIMÃ‰ -->
                        <div class="text-right">
                            <div class="text-xl md:text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-amber-500 animate-pulse font-tech tracking-widest drop-shadow-[0_0_10px_rgba(234,179,8,0.5)]">SAISON 3: TOURNOI D'ORAGE</div>
                            
                        </div>
                    </div>



                    <div class="glass-panel p-6 mb-6 bg-gradient-to-r from-cyan-900/20 to-transparent border-cyan-500/30">
                        <div class="flex justify-between items-center mb-4">
                             <div><div class="text-2xl font-black text-white">Palier <span id="pass-lvl">1</span></div><div class="text-xs text-gray-400" id="pass-xp-txt">0/100 XP</div></div>
                             <!-- Mise Ã  jour du prix du Pass Pro -->
                             <div id="pass-pro-status"></div>
                        </div>
                        <div class="h-4 bg-black/50 rounded-full overflow-hidden"><div id="pass-bar" class="h-full bg-gradient-to-r from-cyan-500 to-purple-500 w-0 transition-all duration-300"></div></div>
                    </div>
                    <!-- Le conteneur pass-track-container est dÃ©filable -->
                    <div class="pass-track-container hide-scrollbar" id="pass-scroll-container">
                        <div class="pass-wrapper">
                             <div class="pass-track-main-line"></div>
                             <div class="pass-row" id="pass-track-free"></div>
                             <div class="pass-row pro" id="pass-track-pro"></div>
                             <div class="pass-row max" id="pass-track-max"></div>
                        </div>
                    </div>
                </div>
                <!-- TAB CLUB (NOUVEAU) -->
                <div id="tab-clubs" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                     <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-orange-500">///</span> CLUB</h2>
                     <div id="club-container" class="glass-panel p-6 min-h-[60vh] flex flex-col items-center justify-center text-center">
                         <div class="text-6xl mb-4">ğŸ›¡ï¸</div>
                         <h3 class="text-2xl font-black text-white mb-2">REJOINS UN CLUB</h3>
                         <p class="text-gray-400 mb-6 text-sm">Discute, joue et progresse avec tes amis !</p>
                         <button onclick="window.ui.createClub()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-xl shadow-lg mb-4 w-full max-w-xs">CRÃ‰ER UN CLUB</button>
                         
                         <!-- SEARCH BAR CLUBS -->
                         <div class="w-full max-w-md mb-4 relative">
                             <input type="text" placeholder="Trouver un club..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-orange-500 transition" oninput="window.ui.search('clubs', this.value)">
                             <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                         </div>

                         <div class="grid grid-cols-1 gap-2 w-full max-w-md" id="club-list">
                             <!-- Dynamic Content -->
                         </div>
                     </div>
                </div>

                <!-- TAB AVENTURES (NOUVEAU) -->
                <div id="tab-adventures" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                     <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-emerald-500">///</span> AVENTURES</h2>
                     
                     <!-- SEARCH BAR ADVENTURES -->
                     <div class="w-full mb-4 relative">
                         <input type="text" placeholder="Rechercher une histoire..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-emerald-500 transition" oninput="window.ui.search('adventures', this.value)">
                         <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                     </div>

                     <div id="adventure-list" class="flex flex-col gap-4"></div>
                </div>
                <div id="tab-starters" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                    <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-blue-500">///</span> ARMURERIE</h2>
                    <!-- SEARCH BAR HEROES -->
                    <div class="w-full mb-4 relative">
                        <input type="text" placeholder="Rechercher un hÃ©ros..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-blue-500 transition" oninput="window.ui.search('starters', this.value)">
                        <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-10" id="list-starters"></div>
                </div>
                <div id="tab-modes" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40"><h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-purple-500">///</span> MISSIONS</h2><div class="grid grid-cols-1 gap-3 mb-8" id="list-modes"></div><h2 class="text-xl font-bold mb-4 flex items-center gap-2 text-gray-400">TERRAINS</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-3" id="list-arenas"></div></div>
                <div id="tab-emotes" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                    <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-pink-500">///</span> COLLECTION</h2>
                    <div class="glass-panel p-6 mb-4"><div class="text-xs text-gray-400 mb-4 uppercase font-bold">Emotes Ã‰quipÃ©es (Max 8)</div><div class="flex justify-center gap-4 mb-2 flex-wrap" id="equipped-emotes"></div></div>
                    <!-- SEARCH BAR EMOTES -->
                    <div class="w-full mb-4 relative">
                        <input type="text" placeholder="Rechercher une emote..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-pink-500 transition" oninput="window.ui.search('emotes', this.value)">
                        <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                    </div>
                    <div class="grid grid-cols-4 md:grid-cols-6 gap-3" id="list-emotes"></div>
                </div>
                <div id="tab-shop" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                    <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-yellow-500">///</span> MEGA MALL</h2>
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-xs text-gray-400">Nouveaux items: <span id="shop-timer" class="text-yellow-400 font-mono">--:--</span></div>
                        <button onclick="window.ui.refreshShop(true)" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-1 px-3 rounded-lg text-xs shadow-lg flex items-center gap-1 active:scale-95 transition">ğŸ”„ 10ğŸ’</button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="shop-offers"></div>
                </div>
                <!-- TAB FRIENDS (NOUVEAU) -->
                <div id="tab-friends" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                     <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-green-500">///</span> AMIS</h2>
                     <div id="friends-container" class="glass-panel p-6 flex flex-col items-center justify-center text-center">
                         <div class="text-6xl mb-4">ğŸ‘¥</div>
                         <h3 class="text-2xl font-black text-white mb-2">LISTE D'AMIS <span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded ml-2 align-middle">BETA</span></h3>
                         <p class="text-gray-400 mb-6 text-sm">Ajoute des amis pour jouer et discuter avec eux !</p>
                         
                         <!-- SEARCH BAR FRIENDS -->
                         <div class="w-full mb-4 relative max-w-md">
                             <input type="text" placeholder="Rechercher un ami (ex: Toto)..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-green-500 transition" oninput="window.ui.search('friends', this.value)">
                             <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                         </div>

                         <button onclick="window.ui.addFriend()" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-xl shadow-lg mb-4 w-full max-w-xs flex items-center justify-center gap-2"><span>â•</span> AJOUTER UN AMI VIA TAG</button>
                         
                         <!-- LISTE AMIS -->
                         <div class="w-full max-w-md mt-4">
                             <div class="flex justify-between items-center mb-2 px-2">
                                 <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest">En Ligne</h4>
                                 <span class="text-[10px] text-green-400 bg-green-900/20 px-2 py-0.5 rounded border border-green-500/20" id="online-count">0</span>
                             </div>
                             <div class="grid grid-cols-1 gap-2" id="friends-list">
                                 <!-- Dynamic Content -->
                             </div>
                         </div>
                     </div>
                </div>
                <div id="tab-infos" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                    <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-gray-500">///</span> INFOS</h2>
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">â˜ ï¸</div><div class="text-[10px] text-gray-500 uppercase font-bold">Kills</div><div class="text-2xl font-bold" id="stat-kills">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸŒŠ</div><div class="text-[10px] text-gray-500 uppercase font-bold">Max Vague</div><div class="text-2xl font-bold" id="stat-wave">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸ®</div><div class="text-[10px] text-gray-500 uppercase font-bold">Parties</div><div class="text-2xl font-bold" id="stat-games">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">âš”ï¸</div><div class="text-[10px] text-gray-500 uppercase font-bold">Victoires</div><div class="text-2xl font-bold" id="stat-wins">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸ’€</div><div class="text-[10px] text-gray-500 uppercase font-bold">DÃ©faites</div><div class="text-2xl font-bold" id="stat-losses">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸ¦¸</div><div class="text-[10px] text-gray-500 uppercase font-bold">HÃ©ros DÃ©bloquÃ©s</div><div class="text-2xl font-bold" id="stat-unlocked">0/20</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸ’¥</div><div class="text-[10px] text-gray-500 uppercase font-bold">DÃ©gÃ¢ts Totaux</div><div class="text-2xl font-bold" id="stat-dmg">0</div></div>
                        <div class="glass-panel p-4 flex flex-col items-center justify-center py-6"><div class="text-3xl mb-2">ğŸ«</div><div class="text-[10px] text-gray-500 uppercase font-bold">Palier Pass Max</div><div class="text-2xl font-bold" id="stat-pass-tier">1</div></div>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-4 text-blue-400">COMPARATIF mPASS</h3>
                    <div class="glass-panel p-4 mb-8 overflow-hidden relative">
                        <div class="absolute top-0 right-0 p-2 opacity-20 text-6xl">ğŸ«</div>
                        <table class="w-full text-sm text-left text-gray-300 relative z-10">
                            <tr class="border-b border-gray-700 text-[10px] md:text-xs text-gray-500 uppercase tracking-wider">
                                <th class="py-3 pl-2">Avantage</th>
                                <th class="py-3 text-center text-gray-400">Gratuit</th>
                                <th class="py-3 text-center text-purple-400">Pro</th>
                                <th class="py-3 text-center text-yellow-400">Max</th>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">ğŸ’°</span> Valeur Totale</td>
                                <td class="text-center text-gray-400">Standard</td>
                                <td class="text-center text-purple-300 font-bold">x10</td>
                                <td class="text-center text-yellow-300 font-black">x25</td>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">ğŸ’</span> Gemmes</td>
                                <td class="text-center">150</td>
                                <td class="text-center text-green-400 font-bold">2 500</td>
                                <td class="text-center text-green-400 font-black">5 000+</td>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">ğŸª™</span> PiÃ¨ces</td>
                                <td class="text-center">2 000</td>
                                <td class="text-center text-green-400 font-bold">15 000</td>
                                <td class="text-center text-green-400 font-black">30 000+</td>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">ğŸ“¦</span> Mega Caisses</td>
                                <td class="text-center">-</td>
                                <td class="text-center font-bold">5</td>
                                <td class="text-center font-black">15</td>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">ğŸ‘•</span> Skins Exclusifs</td>
                                <td class="text-center">-</td>
                                <td class="text-center font-bold">âœ…</td>
                                <td class="text-center font-black">âœ… + Mythique</td>
                            </tr>
                            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                <td class="py-3 pl-2 font-bold flex items-center gap-2"><span class="text-xl">âš¡</span> Boost Progression</td>
                                <td class="text-center">-</td>
                                <td class="text-center">-</td>
                                <td class="text-center font-black text-yellow-400">+20% XP</td>
                            </tr>
                        </table>
                    </div>

                    <h3 class="text-xl font-bold mb-4 text-blue-400">GUIDE DU JEU</h3>
                    
                    <div class="mb-6">
                        <h4 class="text-sm font-bold text-red-400 mb-2 uppercase tracking-widest border-b border-red-500/30 pb-1">DIFFICULTÃ‰S & BOTS</h4>
                        <div class="grid gap-2 text-xs text-gray-300">
                             <div><b class="text-green-400">Facile:</b> Ennemis lents, peu de dÃ©gÃ¢ts. IdÃ©al pour dÃ©buter.</div>
                             <div><b class="text-blue-400">Normal:</b> ExpÃ©rience Ã©quilibrÃ©e. Le standard du jeu.</div>
                             <div><b class="text-red-400">Difficile (x1.5):</b> Ennemis plus rÃ©sistants et agressifs. Score boostÃ© !</div>
                             <div><b class="text-purple-400">Expert (x2.0):</b> Pour les Dieux du jeu. Une erreur = Mort. Score DoublÃ©.</div>

                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="text-sm font-bold text-purple-400 mb-2 uppercase tracking-widest border-b border-purple-500/30 pb-1">MISSIONS</h4>
                        <div class="grid gap-2 text-xs text-gray-300">
                            <div class="flex gap-2"><span class="text-xl">ğŸ§Ÿ</span> <div><b class="text-white">Survie :</b> RÃ©siste aux vagues infinies d'ennemis. Combien de temps tiendras-tu ?</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ†</span> <div><b class="text-white">ClassÃ© :</b> Mode compÃ©titif intense. Gagne des points de classement (RP) pour monter en grade.</div></div>
                            <div class="flex gap-2"><span class="text-xl">âš”ï¸</span> <div><b class="text-white">Duel 1v1 :</b> Affronte un IA d'Ã©lite dans une arÃ¨ne fermÃ©e. Que le meilleur gagne.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ’</span> <div><b class="text-white">Braquage :</b> Infiltre la base et dÃ©truis le coffre-fort avant la fin du chrono !</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ‘¹</span> <div><b class="text-white">Boss Rush :</b> EnchaÃ®ne 3 Boss majeurs sans rÃ©pit. Pour les experts.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸŒ‹</span> <div><b class="text-white">Raid Titan :</b> Survivre contre 5 Boss simultanÃ©s. Chaos total garanti.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ›¡ï¸</span> <div><b class="text-white">DÃ©fense :</b> EmpÃªche les hordes de dÃ©truire le Cristal d'Ã‰nergie au centre.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸš‚</span> <div><b class="text-white">Train Express :</b> Escorte le train de marchandises. Ne le laisse pas se faire dÃ©truire !</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ’°</span> <div><b class="text-white">Voleur :</b> RÃ©cupÃ¨re 10 sacs d'or Ã©parpillÃ©s sur la carte sans te faire tuer.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸŒ€</span> <div><b class="text-white">Cyber Hack :</b> Reste dans la zone du terminal pour le pirater Ã  100%.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ˜¡</span> <div><b class="text-white">Carnage :</b> Mode bourrin. Ã‰limine 50 ennemis le plus vite possible !</div></div>
                            <div class="flex gap-2"><span class="text-xl">â­•</span> <div><b class="text-white">Zone :</b> Capture et maintiens la position centrale pour gagner.</div></div>
                            <div class="flex gap-2"><span class="text-xl">ğŸ‘‘</span> <div><b class="text-white">Chasse :</b> Trouve et ouvre tous les coffres cachÃ©s sur la carte.</div></div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-sm font-bold text-green-400 mb-2 uppercase tracking-widest border-b border-green-500/30 pb-1">TERRAINS</h4>
                        <div class="grid grid-cols-2 gap-2 text-xs text-gray-300">
                            <div><b class="text-white">Neon Tokyo :</b> MÃ©galopole cyberpunk sous une pluie Ã©ternelle et des nÃ©ons aveuglants.</div>
                            <div><b class="text-white">Sandstorm :</b> DÃ©sert aride balayÃ© par des tempÃªtes de sable violentes. VisibilitÃ© rÃ©duite.</div>
                            <div><b class="text-white">Ice Age :</b> Toundra glaciale. Le sol est glissant et le froid est mordant.</div>
                            <div><b class="text-white">Jungle :</b> ForÃªt dense et sauvage. Parfait pour les embuscades.</div>
                            <div><b class="text-white">Magma :</b> Terre brÃ»lÃ©e par la lave en fusion. Attention aux Ã©ruptions.</div>
                            <div><b class="text-white">Ruines :</b> Vestiges d'une ancienne civilisation, dÃ©lavÃ©s par la pluie acide.</div>
                            <div><b class="text-white">Cyber City :</b> Architecture futuriste propre et froide. Flux de donnÃ©es visibles.</div>
                            <div><b class="text-white">NÃ©buleuse :</b> Plateforme spatiale dÃ©rivant dans le vide cosmique.</div>
                            <div><b class="text-white">Mainframe :</b> Au cÅ“ur du systÃ¨me informatique. Murs de code binaire.</div>
                            <div><b class="text-white">Moon Base :</b> Station lunaire Ã  faible gravitÃ© et ciel Ã©toilÃ©.</div>
                            <div><b class="text-white">Cristal :</b> Caverne souterraine illuminÃ©e par des cristaux gÃ©ants magiques.</div>
                            <div><b class="text-white">Solaris :</b> Surface d'une Ã©toile mourante, chaleur extrÃªme et vents solaires.</div>
                            <div><b class="text-white">Marais :</b> Zone humide et toxique, brouillard verdÃ¢tre et vÃ©gÃ©tation pourrie.</div>
                            <div><b class="text-white">Usine :</b> Zone industrielle polluÃ©e, machines rouillÃ©es et fumÃ©e noire.</div>
                            <div><b class="text-white">NÃ©ant :</b> Dimension parallÃ¨le vide et sombre. Seule la lumiÃ¨re des combattants existe.</div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-sm font-bold text-yellow-400 mb-2 uppercase tracking-widest border-b border-yellow-500/30 pb-1">MODIFICATEURS</h4>
                        <div class="grid gap-2 text-xs text-gray-300">
                            <div><b class="text-white">â˜ ï¸ One Shot :</b> Tout le monde a 1 PV. Une balle = mort.</div>
                            <div><b class="text-white">ğŸ§ª Poison :</b> DÃ©gÃ¢ts sur la durÃ©e pour tous les tirs.</div>
                            <div><b class="text-white">âš¡ Speed :</b> Tout le monde (toi + ennemis) est ultra rapide.</div>
                            <div><b class="text-white">ğŸ§› Vampire :</b> Tu voles de la vie en tirant.</div>
                            <div><b class="text-white">â™¾ï¸ Infini :</b> Munitions illimitÃ©es.</div>
                            <div><b class="text-white">ğŸ’¥ Explosif :</b> Les ennemis explosent Ã  leur mort.</div>
                            <div><b class="text-white">ğŸ”™ Recul :</b> Tirer te propulse en arriÃ¨re.</div>

                            <div><b class="text-white">ğŸ˜ GÃ©ant :</b> Tout le monde est gÃ©ant (x2 taille).</div>
                            <div><b class="text-white">ğŸŒ‘ Aveugle :</b> Champ de vision trÃ¨s rÃ©duit.</div>
                            <div><b class="text-white">ğŸŒ Slow Mo :</b> Le temps passe 2x moins vite.</div>
                            <div><b class="text-white">ğŸ² Chaos :</b> Un modificateur alÃ©atoire toutes les 10s !</div>
                        </div>
                    </div>

                    <div class="glass-panel p-6 mb-6 hidden md:block"><h3 class="text-xl font-bold text-blue-400 mb-4">COMMANDES PC</h3><table class="w-full text-sm text-left text-gray-300"><tr class="border-b border-gray-700"><th class="py-2">Action</th><th class="py-2">Touche</th></tr><tr><td class="py-2">DÃ©placement</td><td class="font-mono text-yellow-400">Z Q S D</td></tr><tr><td class="py-2">Viser</td><td class="font-mono text-yellow-400">Souris</td></tr><tr><td class="py-2">Tirer</td><td class="font-mono text-yellow-400">Clic Gauche</td></tr><tr><td class="py-2">Dash</td><td class="font-mono text-yellow-400">Espace</td></tr><tr><td class="py-2">Gadget</td><td class="font-mono text-yellow-400">E</td></tr><tr><td class="py-2">Emote</td><td class="font-mono text-yellow-400">V</td></tr></table></div>
                    
                    <h3 class="text-xl font-bold mb-4 text-blue-400">PATCH NOTES</h3>
                    <div class="glass-panel p-6 text-sm text-gray-300">
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-yellow-400 text-[10px] text-black font-black px-2 py-0.5 rounded-bl-lg z-10 animate-pulse shadow-lg">LATEST</div>
                        <h3>v1.5.4 (REALISM UPDATE)</h3>
                        <ul>
                            <li>ğŸ’€ <b>Mort:</b> Fix du bug de non-mort Ã  0 PV.</li>
                            <li>ğŸœï¸ <b>Terrain:</b> Nouveaux visuels (DÃ©tails, textures) pour plus de rÃ©alisme.</li>
                            <li>âš”ï¸ <b>Battle Royale:</b> Ajustement du nombre d'ennemis pour Ã©viter le chaos.</li>
                            <li>ğŸ› <b>Fixes:</b> Corrections critiques.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <h3>v1.5.3 (PATCH BETA)</h3>
                        <ul>
                            <li>ğŸ› <b>Battle Royale:</b> Correction du spawn d'ennemis (Zombies supprimÃ©s).</li>
                            <li>ğŸ“› <b>BETA:</b> Badge ajoutÃ© sur Royale et Amis.</li>
                            <li>ğŸ› ï¸ <b>Fixes:</b> Corrections de bugs divers.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <h3>v1.5.2 (WINTER UPDATE)</h3>
                        <ul>
                            <li>â„ï¸ <b>Hiver:</b> Cadeaux 2026 disponibles gratuitement !</li>
                            <li>ğŸ¤– <b>UI:</b> Nouvelle organisation du menu Jouer (DifficultÃ© & Bots).</li>
                            <li>â„¹ï¸ <b>Infos:</b> Ajout du guide des difficultÃ©s.</li>
                            <li>ğŸ› ï¸ <b>Optimisation:</b> AmÃ©lioration des performances.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-yellow-500 text-[10px] text-black font-black px-2 py-0.5 rounded-bl-lg z-10 animate-pulse shadow-lg">SAISON 3</div>
                        <h3>v1.5.0 (TOURNOI D'ORAGE)</h3>
                        <ul>
                            <li>âš¡ <b>Saison 3:</b> Le Tournoi d'Orage commence ! ThÃ¨me Jaune/Foudre.</li>
                            <li>ğŸŒ©ï¸ <b>Mode:</b> Capture de Foudre (Zone Mouvante).</li>
                            <li>ğŸ›ï¸ <b>Terrain:</b> Temple Foudre.</li>
                            <li>âš¡ <b>HÃ©ros:</b> Zeus (Mythique).</li>
                            <li>ğŸ† <b>Rangs:</b> Ajout de Grandmaster, Challenger, Legend, God & Eternal !</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-green-500 text-[10px] text-black font-black px-2 py-0.5 rounded-bl-lg z-10 shadow-lg">NEW</div>
                        <h3>v1.4.7 (SOCIAL UPDATE 2.0)</h3>
                        <ul>
                            <li>ğŸ‘¥ <b>Amis:</b> Recherche + Ajout d'amis via Tag avec UI dÃ©diÃ©e.</li>
                            <li>ğŸ” <b>Recherche:</b> AjoutÃ© barre de recherche pour QuÃªtes et Aventures.</li>
                            <li>âœ¨ <b>Interface:</b> AmÃ©lioration interfaces Clubs et Amis.</li>
                            <li>ğŸ› <b>Fixes:</b> Corrections bugs divers.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-yellow-400 text-[10px] text-black font-black px-2 py-0.5 rounded-bl-lg z-10 shadow-lg opacity-80">ULTIMATE</div>
                        <h3>v1.4.4 (FINAL POLISH)</h3>
                        <ul>
                            <li>âœ¨ <b>Polissage:</b> Interface plus fluide et rÃ©active.</li>
                            <li>ğŸ¨ <b>Visuel:</b> Nouveaux effets de particules et lueurs.</li>
                            <li>ğŸ›¡ï¸ <b>Ã‰quilibrage:</b> Bots et hÃ©ros ajustÃ©s pour le fun.</li>
                            <li>ğŸ› <b>Fixes:</b> Corrections ultimes.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-cyan-500 text-[10px] text-black font-black px-2 py-0.5 rounded-bl-lg z-10 shadow-lg opacity-80">LATEST</div>
                        <h3>v1.4.2 (HOLIDAY UPDATE)</h3>
                        <ul>
                            <li>ğŸ… <b>NoÃ«l:</b> Il neige ! + Cadeaux en boutique.</li>
                            <li>ğŸ›¡ï¸ <b>Clubs:</b> Timestamps dans le chat.</li>
                            <li>âœ¨ <b>Saison:</b> Date de fin ajoutÃ©e.</li>
                            <li>ğŸ› <b>Fixes:</b> Optimisation Aventures & Clubs.</li>
                        </ul>
                    </div>
                    <div class="patch-note">
                        <h3>v1.4.1 (SOUND & STORY)</h3>
                        <ul>
                            <li>ğŸ“œ <b>Nouvelles Aventures:</b> DÃ©couvrez les histoires de Scout et Heavy (Tank) !</li>
                            <li>ğŸ”Š <b>Audio HD:</b> Nouveaux effets sonores premium pour les tirs, impacts et victoires.</li>
                            <li>ğŸ› <b>Correctifs:</b> Optimisation globale et corrections de bugs mineurs.</li>
                        </ul>
                    </div>
                    <div class="patch-note relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-red-600 text-[10px] font-black px-2 py-0.5 rounded-bl-lg z-10 animate-pulse shadow-lg">NOUVEAU</div>
                        <h3>v1.3.5 (TROPHY UPDATE)</h3>
                        <ul>
                            <li>ğŸ† <b>Trophy Road :</b> Extension massive ! 25 Paliers jusqu'Ã  20 000 TrophÃ©es.</li>
                            <li>ğŸ <b>RÃ©compenses :</b> Nouveaux paliers Elite, Master, Legend et Cyber God.</li>
                            <li>âœ¨ <b>Visuel :</b> Interface de progression amÃ©liorÃ©e et plus fluide.</li>
                            <li>ğŸ› <b>Correctifs :</b> Optimisation du code et corrections diverses.</li>
                        </ul>
                    </div>
                    <div class="patch-note">
                        <h3>v1.3.4 (SOCIAL UPDATE)</h3>
                        <ul>
                            <li>ğŸ¤– <b>Bot Emotes :</b> Les bots expriment leurs Ã©motions (Joie, ColÃ¨re) !</li>
                            <li>ğŸ’¢ <b>RÃ©actions :</b> Emotes quand ils sont touchÃ©s ou tuÃ©s.</li>
                            <li>âœ¨ <b>Immersion :</b> Le monde semble plus vivant.</li>
                        </ul>
                    </div>
                    <div class="patch-note"><h3>v1.3.3 (VISUAL ENHANCED)</h3><ul><li>âœ¨ <b>VFX Engine :</b> Physique de particules, rotations et nouvelles formes !</li><li>ğŸ’¬ <b>Textes :</b> Animation "Pop" fluide pour les dÃ©gÃ¢ts.</li><li>ğŸ’¥ <b>Impact :</b> Muzzle flash et dÃ©bris amÃ©liorÃ©s.</li></ul></div>
                    <div class="patch-note"><h3>v1.3.2 (SMART UPDATE)</h3><ul><li>ğŸ§  <b>IA Intelligente :</b> Les bots jouent les objectifs (CTF, Wagon) !</li><li>ğŸ›’ <b>Wagon :</b> Les alliÃ©s aident Ã  pousser.</li><li>ğŸ› ï¸ <b>Optimisation :</b> Nettoyage du code.</li></ul></div>
                        <div class="patch-note"><h3>v1.3.1 (VISUAL UPDATE)</h3><ul><li>ğŸ”¥ <b>Kill Streaks :</b> EnchaÃ®nez les kills pour des effets spÃ©ciaux !</li><li>âœ¨ <b>Effets :</b> Nouveaux VFX et animations d'UI.</li><li>ğŸ› <b>Fixes :</b> Corrections de bugs (Bio, Score).</li></ul></div>
                        <div class="patch-note"><h3>v1.3 (CYBER FUTURE)</h3><ul><li>ğŸšƒ <b>Nouveau Mode :</b> Payload (Convoi) ! Poussez le wagon jusqu'Ã  la fin.</li><li>â˜„ï¸ <b>Nouveaux HÃ©ros :</b> Cosmo (Mythique) et Brick (Commun).</li><li>âš¡ <b>Nouvelle ArÃ¨ne :</b> RÃ©acteur.</li><li>ğŸ’° <b>Golden Chase :</b> Plus de piÃ¨ces !</li></ul></div>
                        <div class="patch-note"><h3>v1.2.9 (Crash Fix)</h3><ul><li>ğŸ› ï¸ <b>CRITIQUE :</b> Correction du crash "timeScale" (Slow Mo).</li><li>âš¡ <b>Optimisation :</b> StabilitÃ© amÃ©liorÃ©e.</li></ul></div>
                        <div class="patch-note"><h3>v1.2.8 (Hotfix Update)</h3><ul><li>ğŸ¤– <b>IA Bots :</b> Les bots alliÃ©s n'attaquent plus le joueur.</li><li>ğŸ’° <b>Golden Chase :</b> Correction de la collecte des piÃ¨ces.</li><li>ğŸ› ï¸ <b>StabilitÃ© :</b> Corrections de crashs majeurs (match error).</li></ul></div>
                        <div class="patch-note"><h3>v1.2.7 (Bug Fix Update)</h3><ul><li>ğŸ› ï¸ <b>Modes de Jeu :</b> Victoire/DÃ©faite corrigÃ©e pour tous les modes.</li><li>ğŸ’ <b>Defense :</b> Ajout du Cristal Ã  protÃ©ger.</li><li>ğŸ‘¾ <b>Spawns :</b> Ennemis corrigÃ©s pour tous les modes.</li></ul></div>
                        <div class="patch-note"><h3>v1.2.6 (Feature Update)</h3><ul><li>ğŸš© <b>Capture le Drapeau :</b> Nouveau mode stratÃ©gique en 4v4 ! Volez le drapeau ennemi et protÃ©gez le vÃ´tre.</li><li>âœ¨ <b>AmÃ©liorations :</b> Meilleur HUD pour les modes d'Ã©quipe.</li><li>ğŸ› <b>Correctifs :</b> StabilitÃ© et bugs mineurs.</li></ul></div>
                        <div class="patch-note"><h3>v1.2.5 (Polish & Fixes)</h3><ul><li>ğŸ’° <b>Golden Chase :</b> Mode survie haute-rÃ©compense (2 min). Collectez l'or !</li><li>ğŸ›¡ï¸ <b>Team Battle :</b> Score d'Ã©quipe corrigÃ©. Premier Ã  40 Kills !</li><li>âœ¨ <b>Visuel :</b> Effets amÃ©liorÃ©s pour Marais, Usine et NÃ©ant.</li><li>ğŸ› <b>Correctifs :</b> Bugs de spawn et munitions rÃ©solus.</li></ul></div>
                        <div class="patch-note"><h3>v1.2.4 (WILD UPDATE)</h3><ul><li>ğŸ¾ <b>5 Nouveaux HÃ©ros "SAUVAGES" :</b> Bear, Wolf, Eagle, Rhino, Shark !</li><li>ğŸŒ¿ <b>ThÃ¨me Nature :</b> La nature reprend ses droits dans mBattle.</li><li>âš¡ <b>Ã‰quilibrage :</b> Ajustements divers sur les hÃ©ros.</li></ul></div>
                        <div class="patch-note"><h3>v1.2.3 (Trophy Road Update)</h3><ul><li>ğŸ† <b>Voie des TrophÃ©es :</b> Gagnez 1000 ğŸª™ et 25 ğŸ’ Ã  chaque palier de trophÃ©es !</li><li>ğŸ“ˆ <b>Progression :</b> Cliquez sur votre rang dans le menu pour voir les rÃ©compenses.</li><li>ğŸ› ï¸ <b>Correctifs :</b> Optimisation et corrections mineures.</li></ul></div><div class="patch-note"><h3>v1.2.2 (CONTENT UPDATE)</h3><ul><li>ğŸ’ <b>Skins Diamant :</b> Nouveaux skins de prestige pour Soldier, Heavy et Sniper (5000 ğŸª™).</li><li>ğŸŒŠ <b>Nouveau Terrain :</b> Atlantis ! Combattez sous l'ocÃ©an.</li><li>ğŸ² <b>3 Nouveaux Modificateurs :</b> Aveugle, Slow Mo et Chaos !</li><li>ğŸ› <b>Correctifs :</b> AmÃ©liorations diverses.</li></ul></div><div class="patch-note"><h3>v1.2.1 (Fixes)</h3><ul><li>ğŸ› <b>HUD :</b> Correction de l'affichage du niveau du hÃ©ros en jeu.</li><li>ğŸ› ï¸ <b>StabilitÃ© :</b> Corrections de bugs divers et optimisations.</li></ul></div><div class="patch-note"><h3>v1.2.0 (THE HEROIC UPDATE)</h3><ul><li>â­ï¸ <b>10 Nouveaux HÃ©ros :</b> Vulcan, Zephyr, Necro, Gladiator, Bouncer, Fungus, Wasp, Mirage, Juggernaut, Eclipse ! (Total 60 HÃ©ros)</li><li>ğŸ­ <b>100 Emotes :</b> Collection massive de nouvelles emotes !</li><li>ğŸ« <b>mPass MAX :</b> Le Pass de Combat s'Ã©tend maintenant jusqu'au palier 100 avec une rÃ©compense ultime !</li><li>ğŸ¨ <b>Skins :</b> 5 Skins pour TOUS les nouveaux hÃ©ros.</li><li>ğŸ› <b>Optimisation :</b> FluiditÃ© accrue.</li></ul></div><div class="patch-note"><h3>v1.1.5 (Content Explosion)</h3><ul><li>ğŸ”¥ <b>Missions & Terrains :</b> Total 20 Modes et 15 ArÃ¨nes !</li><li>ğŸ¨ <b>Skins :</b> 5 Skins minimum pour CHAQUE hÃ©ros !</li><li>âš™ï¸ <b>Modificateurs :</b> Total 15 modificateurs (Nouveau: Fragile).</li><li>ğŸ˜€ <b>Emotes :</b> 25 Nouvelles Emotes (Total 75+).</li><li>ğŸ› <b>Correctifs :</b> StabilitÃ© et bugs mineurs corrigÃ©s.</li></ul></div><div class="patch-note"><h3>v1.1.4 (Packs Corrections)</h3><ul><li>ğŸ› ï¸ Corrections de bugs sur les quÃªtes et rÃ©compenses.</li><li>âš¡ Optimisation des performances.</li><li>ğŸ› Fix: Orthographe Modificateurs.</li></ul></div><div class="patch-note"><h3>v1.1.3 (Update Heroes)</h3><ul><li>ğŸ¦¸ 5 Nouveaux HÃ©ros : Cyclops, Banshee, Druid, Spartan, Hydra !</li><li>ğŸ“ Descriptions : AmÃ©lioration des textes d'Infos (Missions & Terrains).</li><li>ğŸ› Bugs : Corrections mineures et optimisation.</li></ul></div><div class="patch-note"><h3>v1.1.2 (Big Content Update)</h3><ul><li>ğŸ”¥ 5 Nouveaux HÃ©ros : Vulcan, Zephyr, Necro, Gladiator, Bouncer !</li><li>ğŸ‘• SKINS : Tous les hÃ©ros ont maintenant 5 skins minimum !</li><li>âš™ï¸ 5 Nouveaux Modificateurs : Low Gravity, Double DÃ©gÃ¢ts, Tiny, Pluie de Balles, No Regen.</li><li>ğŸ° 3 Nouveaux Terrains : Marais, Usine, NÃ©ant.</li><li>â˜ ï¸ Nouvelle Mission : Chasse au TrÃ©sor.</li><li>ğŸ˜€ Emotes : Collection Ã©tendue Ã  50 emotes !</li></ul></div><div class="patch-note"><h3>v1.1.1 (Patch mPass)</h3><ul><li>ğŸ¨ mPASS 2.0 : Refonte complÃ¨te du design du Pass de Combat !</li><li>ğŸŒ‹ Nouveau Terrain : Solaris (Ambiance volcanique et cendres).</li><li>ğŸ› ï¸ Bugs CorrigÃ©s : Fiabilisation de la boutique et du changement d'onglets.</li></ul></div><div class="patch-note"><h3>v1.1.0</h3><ul><li>ğŸ¦¸ 5 Nouveaux HÃ©ros (FINAL) : Spike, Tesla, Siren, Paladin, Zenith !</li><li>ğŸ“œ SystÃ¨me de QuÃªtes : QuÃªtes Quotidiennes (Reset 24h) et de Saison.</li><li>ğŸ¯ Nouvelles Missions de quÃªtes : DÃ©gÃ¢ts, Collecte, Survie...</li><li>ğŸ’¸ Drops : Les ennemis lÃ¢chent parfois des PiÃ¨ces et Gemmes !</li><li>ğŸ”¥ Level 45+ HÃ©ros total !</li></ul></div><div class="patch-note"><h3>v1.0.6</h3><ul><li>ğŸš€ 2 Nouvelles Missions : Carnage (Tuer 50 ennemis) & Zone (ContrÃ´le de zone).</li><li>ğŸ’ Nouveau Terrain : Grotte de Cristal.</li><li>âœ¨ AmÃ©lioration visuelle : Plus d'effets sur tous les terrains !</li><li>ğŸ› ï¸ Correction de bugs : Gestion de la camÃ©ra et spawns.</li></ul></div><div class="patch-note"><h3>v1.0.5</h3><ul><li>ğŸ› ï¸ CRITIQUE : RÃ©paration de l'IA (Vision des bots).</li><li>âš¡ Optimisation du code.</li></ul></div><div class="patch-note"><h3>v1.0.4</h3><ul><li>ğŸ¦¸ 5 Nouveaux HÃ©ros : Spectre, Solar, Orbit, Raptor, Grunt !</li><li>ğŸš€ Nouvelle Mission : Cyber Escape. Rejoins la zone d'extraction !</li><li>ğŸ› ï¸ Bugs corrigÃ©s : Soin impossible en One Shot, IA amÃ©liorÃ©e vs InvisibilitÃ©.</li></ul></div><div class="patch-note"><h3>v1.0.3</h3><ul><li>ğŸ¦¸ 5 Nouveaux HÃ©ros : Rock, Frost, Blaze, Storm, Glitch !</li><li>ğŸ› ï¸ Corrections de bugs (RÃ©gÃ©nÃ©ration Bots).</li><li>âš¡ AmÃ©liorations diverses.</li></ul></div><div class="patch-note"><h3>v1.0.2</h3><ul><li>ğŸ› ï¸ Corrections de bugs : Refresh Shop et Affichage des rÃ©compenses.</li><li>ğŸ’ Optimisation de l'interface.</li></ul></div><div class=\"patch-note\"><h3>v1.0.1</h3><ul><li>ğŸ¦¸ 5 Nouveaux HÃ©ros : Archer, Brawler, Grenadier, Vortex, Nova !</li><li>ğŸ”« Nouveau Mode : Jeu d'Armes (Gun Game).</li><li>ğŸŒ‘ Nouvelle ArÃ¨ne : Moon Base.</li><li>ğŸ‘• Nouveaux Skins : Ajout de 5 nouveaux skins pour Chrono, Viper, Bomber, Samurai et Cyber.</li><li>ğŸ Offres Gratuites : Nouvelles rÃ©compenses temporaires gratuites dans la boutique !</li><li>âš¡ Optimisations diverses et corrections mineures.</li></ul></div><div class="patch-note"><h3>v1.0.0 (Saison 2)</h3><ul><li>2ï¸âƒ£ Ajout du contenu de saison 2</li><li>ğŸš« Correction de bugs majeurs principalement.</li><li>ğŸ‘• Nouveaux Skins : Ajout de skins pour Drone, Harpy, Shaman et Reaper.</li><li> ğŸ‘• Nouveaux hÃ©ros : ajout pour 30 au total</li><li>â³ AmÃ©liorations divers (profil, shop...)</li><li>ğŸ¦¾ PV Bots : Augmentation des PV de base des bots (+20 PV) et amÃ©lioration de l'intelligence des bots.</li></ul></div></div>
                </div>
                <div id="tab-profile" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                    <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-white">///</span> COMPTE</h2>
                    <div id="profile-main-card" class="glass-panel p-6 mb-6 relative overflow-hidden bg-gradient-to-br from-blue-900/20 to-purple-900/20 border-blue-500/30">
                        <div class="absolute top-0 right-0 p-4 opacity-50 z-20"><button onclick="window.ui.openSettings()" class="text-xl hover:scale-110 transition md:text-2xl bg-black/40 p-2 rounded-xl backdrop-blur-md border border-white/10">âš™ï¸</button></div>
                        <div class="flex flex-col md:flex-row items-center gap-6 relative z-10">
                            <div class="relative group cursor-pointer" onclick="window.ui.openAvatarSelector()">
                                <div class="w-24 h-24 rounded-full bg-gray-800 border-4 border-blue-500/30 flex items-center justify-center text-5xl shadow-[0_0_30px_rgba(59,130,246,0.3)] overflow-hidden hover:border-blue-400 transition" id="profile-avatar">ğŸ‘¤</div>
                                <div class="absolute bottom-1 right-1 bg-blue-600 border border-white text-xs p-1.5 rounded-full text-white shadow-lg">âœï¸</div>
                            </div>
                            <div class="flex-1 text-center md:text-left w-full">
                                <div class="text-[10px] text-blue-300 font-bold uppercase tracking-widest mb-1">IDENTITÃ‰</div>
                                <div class="flex justify-center md:justify-start items-center gap-2 mb-2">
                                     <h3 class="text-3xl font-black text-white tracking-tight" id="profile-display-name">Player</h3>
                                     <div class="bg-blue-600/20 text-blue-300 text-[10px] font-mono px-2 py-0.5 rounded border border-blue-500/30" id="profile-tag">#TAG</div>
                                </div>
                                <div class="text-sm text-gray-300 italic mb-3 min-h-[1.25em]" id="profile-bio">"Aucune bio dÃ©finie..."</div>
                                
                                <div class="flex justify-center md:justify-start gap-4">
                                     <div class="px-3 py-1 rounded bg-black/40 border border-white/10 text-xs font-bold text-yellow-400 flex items-center gap-2"><span class="text-lg">âš¡</span> <span id="profile-lvl">LVL 1</span></div>
                                     <div class="px-3 py-1 rounded bg-black/40 border border-white/10 text-xs font-bold text-purple-400 flex items-center gap-2"><span class="text-lg">ğŸ†</span> <span id="profile-trophies">0</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="absolute bottom-2 right-2 text-[8px] text-gray-600 font-mono">v1.5.4</div>
                    </div>
                <div class="glass-panel p-6 mb-6 bg-blue-900/10 border-blue-500/30 hidden"> <!-- HIDDEN V1.4.6 -->
                    </div>

                    <div class="glass-panel p-6 mb-6 bg-purple-900/10 border-purple-500/30 hidden"> <!-- HIDDEN V1.4.6 -->
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="glass-panel p-6">
                            <div class="font-bold text-lg mb-2 flex items-center gap-2">ğŸ’¾ Sauvegarde</div>
                            <div class="text-xs text-gray-400 mb-4">Copie ce code pour transfÃ©rer ton compte.</div>
                            <button onclick="window.ui.exportSave()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition text-sm">COPIER MA SAUVEGARDE ğŸ“‹</button>
                        </div>
                        <div class="glass-panel p-6">
                            <div class="font-bold text-lg mb-2 flex items-center gap-2">ğŸ“¥ Importer</div>
                            <div class="text-xs text-gray-400 mb-4">Colle un code de sauvegarde ici.</div>
                            <button onclick="window.ui.importSave()" class="w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 rounded-xl transition text-sm">IMPORTER SAUVEGARDE ğŸ”„</button>
                        </div>
                </div>
            </div>
            
            <div id="tab-quests" class="tab-content hidden animate-fadeIn w-full max-w-3xl mx-auto pb-40">
                <h2 class="text-2xl font-black mb-4 flex items-center gap-2 font-tech"><span class="text-yellow-400">///</span> QUÃŠTES & DÃ‰FIS</h2>
                
                <!-- SEARCH BAR QUESTS -->
                <div class="w-full mb-4 relative">
                    <input type="text" placeholder="Rechercher une quÃªte..." class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white focus:outline-none focus:border-yellow-400 transition" oninput="window.ui.search('quests', this.value)">
                    <div class="absolute left-3 top-3.5 text-gray-400">ğŸ”</div>
                </div>

                <div class="glass-panel p-6 mb-6 bg-blue-900/10 border-blue-500/30">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2 text-yellow-400">
                        ğŸ“œ QUÃŠTES DU JOUR 
                        <span class="text-[10px] text-gray-500 bg-black px-2 py-0.5 rounded" id="quest-timer-tab">Reset 24h</span>
                        <button onclick="window.QuestSystem.refreshDaily()" class="ml-auto bg-purple-600 hover:bg-purple-500 text-white font-bold py-1 px-3 rounded-lg text-xs shadow-lg flex items-center gap-1 active:scale-95 transition">ğŸ”„ 10ğŸ’</button>
                    </h3>
                    <div id="daily-quests-list-tab" class="flex flex-col gap-2"></div>
                </div>
                <div class="glass-panel p-6 mb-6 bg-purple-900/10 border-purple-500/30">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2 text-purple-400">ğŸŒŸ QUÃŠTES DE SAISON</h3>
                    <div id="season-quests-list-tab" class="flex flex-col gap-2"></div>
                </div>
            </div>
        <div class="w-full glass-nav h-[90px] pb-safe flex justify-around items-center px-2 z-50 fixed bottom-0 left-0 right-0 overflow-x-auto hide-scrollbar bg-black/90 backdrop-blur-xl border-t border-white/10 shadow-[0_-5px_20px_rgba(0,0,0,0.5)]">
                <button onclick="window.ui.showTab('play')" id="nav-play" class="nav-item flex flex-col items-center p-2 min-w-[60px] active selected"><span class="text-xl icon mb-1"><i class="fa-solid fa-gamepad"></i></span><span class="text-[9px] font-bold">JOUER</span></button>
                <button onclick="window.ui.showTab('starters')" id="nav-starters" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-mask"></i></span><span class="text-[9px] font-bold">HÃ‰ROS</span></button>
                <button onclick="window.ui.showTab('adventures')" id="nav-adventures" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-scroll"></i></span><span class="text-[9px] font-bold">AVENTURE</span></button>
                <button onclick="window.ui.showTab('pass')" id="nav-pass" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-ticket"></i></span><span class="text-[9px] font-bold">PASS</span></button>
                <button onclick="window.ui.showTab('clubs')" id="nav-clubs" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-shield-halved"></i></span><span class="text-[9px] font-bold">CLUBS</span></button>
                <button onclick="window.ui.showTab('shop')" id="nav-shop" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-cart-shopping"></i></span><span class="text-[9px] font-bold">SHOP</span></button>
                <button onclick="window.ui.showTab('friends')" id="nav-friends" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-user-group"></i></span><span class="text-[9px] font-bold">AMIS</span></button>
                <button onclick="window.ui.showTab('emotes')" id="nav-emotes" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-face-smile"></i></span><span class="text-[9px] font-bold">EMOTES</span></button>
                <button onclick="window.ui.showTab('quests')" id="nav-quests" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-bullseye"></i></span><span class="text-[9px] font-bold">QUÃŠTES</span></button>
                <button onclick="window.ui.showTab('infos')" id="nav-infos" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-circle-info"></i></span><span class="text-[9px] font-bold">INFOS</span></button>
        <button onclick="window.ui.showTab('profile')" id="nav-profile" class="nav-item flex flex-col items-center p-2 min-w-[60px]"><span class="text-xl icon mb-1"><i class="fa-solid fa-user"></i></span><span class="text-[9px] font-bold">PROFIL</span></button>
            </div>
        </div>

        <!-- TROPHY ROAD MODAL -->
        <div id="trophy-road-modal" class="hidden absolute inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn" onclick="this.classList.add('hidden')">
             <div class="glass-panel p-6 max-w-lg w-full mx-4 flex flex-col gap-4 max-h-[80vh] overflow-y-auto hide-scrollbar" onclick="event.stopPropagation()">
                <div class="flex justify-between items-center border-b border-white/10 pb-4"><h3 class="text-xl font-black text-yellow-400">VOIE DES TROPHÃ‰ES ğŸ†</h3><button onclick="document.getElementById('trophy-road-modal').classList.add('hidden')" class="text-2xl text-gray-400 hover:text-white">Ã—</button></div>
                <div id="trophy-list" class="flex flex-col gap-3"></div>
             </div>
        </div>

        <!-- SETTINGS MODAL -->
        <div id="settings-modal" class="hidden absolute inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn" onclick="window.ui.closeSettings()">
             <div class="glass-panel p-6 max-w-sm w-full mx-4 flex flex-col gap-4 max-h-[80vh] overflow-y-auto hide-scrollbar" onclick="event.stopPropagation()">
                <div class="flex justify-between items-center border-b border-white/10 pb-4"><h3 class="text-xl font-black">PARAMÃˆTRES âš™ï¸</h3><button onclick="window.ui.closeSettings()" class="text-2xl text-gray-400 hover:text-white">Ã—</button></div>
                <div class="settings-grp"><label class="settings-label">Pseudonyme</label><input type="text" id="setting-name" class="profile-input" placeholder="Ton pseudo..."></div>
                <div class="settings-grp"><label class="settings-label">Avatar</label><button onclick="window.ui.openAvatarSelector()" class="w-full bg-white/10 hover:bg-white/20 border border-white/20 py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-2">CHANGER D'AVATAR ğŸ‘¤</button></div>
                <div class="settings-grp"><label class="settings-label">Email</label><input type="email" id="setting-email" placeholder="email@exemple.com" class="profile-input"></div>
                <div class="settings-grp"><label class="settings-label">TÃ©lÃ©phone</label><input type="tel" id="setting-phone" placeholder="+33 6..." class="profile-input"></div>
                <div class="settings-grp"><label class="settings-label">Date de Naissance</label><input type="date" id="setting-dob" class="profile-input"></div>
                <div class="settings-grp"><label class="settings-label">Bio</label><textarea id="setting-bio" placeholder="Ta description..." class="profile-input resize-none h-20"></textarea></div>
                <div class="settings-grp pt-2 border-t border-white/10 mt-2"><div class="flex justify-between items-center mb-2"><label class="settings-label text-yellow-400">ThÃ¨me du Profil <span class="bg-yellow-500 text-black px-1 rounded text-[8px]">PRO</span></label><div id="theme-lock-icon" class="text-[10px] text-gray-500"></div></div><div class="flex gap-2 overflow-x-auto hide-scrollbar p-1" id="profile-theme-selector"></div></div>
                <button onclick="window.ui.saveSettings()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl mt-2">ENREGISTRER</button>
                <div class="mt-4 pt-4 border-t border-white/10 text-center"><p class="text-[10px] text-gray-500 leading-relaxed">mBattle est un jeu vidÃ©o gratuit conÃ§u par Mathias Tusseau. Les bots sont pilotÃ©s par mAI.<br>Si vous rencontrez un problÃ¨me, rendez vous sur : <a href="https://forms.gle/1PVVdcSi3mYyq3XeA" target="_blank" class="text-blue-400 hover:underline">Support</a></p><div class="text-[8px] text-gray-600 mt-1">v1.4.6</div></div>
             </div>
        </div>

        <!-- HERO DETAILS MODAL -->
        <div id="hero-details-modal" class="hidden absolute inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn" onclick="this.classList.add('hidden')">
            <div class="glass-panel p-6 max-w-md w-full mx-4 relative border-2 border-blue-500/30" onclick="event.stopPropagation()" id="hero-card-inner">
                <button onclick="document.getElementById('hero-details-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl z-10">Ã—</button>
                <div class="flex flex-col items-center mb-6"><div class="w-24 h-24 rounded-2xl bg-black/50 border-2 border-white/20 flex items-center justify-center text-6xl shadow-[0_0_30px_rgba(59,130,246,0.3)] mb-3" id="hd-icon"></div><h2 class="text-3xl font-black uppercase font-tech tracking-wider" id="hd-name"></h2><div id="hd-rarity" class="mb-1 text-xs font-bold uppercase tracking-widest px-3 py-1 rounded bg-gray-800">COMMUN</div><div class="text-blue-400 font-bold text-sm" id="hd-lvl"></div></div>
                <!-- REMPLACÃ‰ PAR hero-stats-container pour les dÃ©tails par niveau -->
                <div id="hero-stats-container" class="space-y-4 mb-6"></div>
                <!-- FIN REMPLACÃ‰ -->
                <div class="mb-4" id="hd-skins-container"><div class="text-[10px] text-gray-400 uppercase font-bold mb-2">SKINS</div><div class="flex gap-2 overflow-x-auto hide-scrollbar" id="hd-skins-list"></div></div>
                <div class="bg-white/5 p-4 rounded-xl border border-white/10 mb-4"><div class="flex justify-between"><div><div class="text-[10px] text-gray-400 uppercase font-bold mb-1">GADGET</div><div class="text-sm font-bold text-white flex items-center gap-2"><span id="hd-gadget-icon">âš¡</span> <span id="hd-gadget-name"></span></div></div><div><div class="text-[10px] text-gray-400 uppercase font-bold mb-1 text-right">PASSIF</div><div class="text-sm font-bold text-yellow-400 text-right" id="hd-passive"></div></div></div></div>
                <p class="text-xs text-gray-400 italic text-center mb-6 leading-relaxed whitespace-pre-line" id="hd-desc"></p>
                <div id="hd-actions" class="grid gap-2"></div>
            </div>
        </div>
        <!-- AVATAR SELECTOR WITH UPLOAD -->
        <div id="avatar-selector" class="hidden absolute inset-0 bg-black/90 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn" onclick="this.classList.add('hidden')">
            <div class="glass-panel p-6 max-w-sm w-full mx-4 flex flex-col gap-4" onclick="event.stopPropagation()">
                <h3 class="text-xl font-black text-center">CHOISIS TON AVATAR</h3>
                <div class="grid grid-cols-5 gap-2 mb-2 overflow-y-auto max-h-64 hide-scrollbar" id="avatar-grid"></div>
                <div class="border-t border-white/10 pt-4">
                    <input type="file" id="upload-avatar" hidden accept="image/*" onchange="window.ui.uploadAvatar(this)">
                    <button onclick="document.getElementById('upload-avatar').click()" class="w-full bg-blue-600/50 hover:bg-blue-500 border border-blue-500/50 py-3 rounded-xl font-bold text-sm mb-2">IMPORTER IMAGE ğŸ“¸</button>
                    <button onclick="document.getElementById('avatar-selector').classList.add('hidden')" class="w-full bg-gray-700 py-3 rounded-xl font-bold text-sm">ANNULER</button>
                </div>
            </div>
        </div>
        <div id="friend-profile-modal" class="hidden absolute inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn" onclick="this.classList.add('hidden')">
            <div class="glass-panel p-6 max-w-sm w-full mx-4 flex flex-col items-center relative border-2 border-blue-500/30" onclick="event.stopPropagation()">
                <button onclick="document.getElementById('friend-profile-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">Ã—</button>
                <div class="w-24 h-24 rounded-full bg-black/50 border-2 border-white/20 flex items-center justify-center text-6xl shadow-[0_0_30px_rgba(59,130,246,0.3)] mb-4" id="fp-avatar">ğŸ‘¤</div>
                <h2 class="text-3xl font-black text-white mb-1" id="fp-name">Player</h2>
                <div class="text-xs font-bold uppercase tracking-widest px-3 py-1 rounded bg-green-900/50 text-green-400 border border-green-500/30 mb-4" id="fp-status">En Ligne</div>
                
                <div class="grid grid-cols-2 gap-3 w-full mb-6">
                    <div class="bg-white/5 p-3 rounded-lg text-center border border-white/10">
                        <div class="text-xs text-gray-400 uppercase font-bold">TrophÃ©es</div>
                        <div class="text-xl font-black text-yellow-400" id="fp-trophies">0 ğŸ†</div>
                    </div>
                    <div class="bg-white/5 p-3 rounded-lg text-center border border-white/10">
                        <div class="text-xs text-gray-400 uppercase font-bold">Club</div>
                        <div class="text-xl font-bold text-blue-400" id="fp-club">-</div>
                    </div>
                </div>
                
                <div class="flex gap-2 w-full">
                    <button class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl shadow-lg">INVITER âœ‰ï¸</button>
                    <button onclick="document.getElementById('friend-profile-modal').classList.add('hidden')" class="flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 rounded-xl">FERMER</button>
                </div>
            </div>
        </div>
        <div id="levelup-screen" class="hidden absolute inset-0 bg-black/90 backdrop-blur-xl flex items-center justify-center z-[60] pointer-events-auto animate-fadeIn">
            <div class="w-full max-w-sm p-6 text-center"><h2 class="text-5xl font-tech text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 font-black mb-4 animate-bounce">LEVEL UP!</h2><div id="perk-container" class="grid gap-3"></div></div>
        </div>
        <div id="gameover-screen" class="hidden absolute inset-0 bg-red-950/95 backdrop-blur-2xl flex items-center justify-center z-[70] pointer-events-auto animate-fadeIn">
            <div class="text-center max-w-sm w-full p-6">
                <h1 id="go-title" class="text-8xl font-black text-white mb-2 drop-shadow-2xl tracking-tighter">KO</h1>
                <p class="text-red-400 font-bold text-xl mb-8 uppercase tracking-widest" id="go-reason">Ã‰liminÃ©</p>
                <div class="glass-panel p-6 mb-6 grid grid-cols-2 gap-4 text-left bg-black/40">
                    <div><div class="text-[10px] text-gray-500 uppercase font-bold mb-1">Score</div><div id="go-score" class="text-2xl font-black text-white font-tech">0</div></div>
                    <div><div class="text-[10px] text-gray-500 uppercase font-bold mb-1">Gains</div><div class="text-xl font-bold text-yellow-400" id="go-rewards"></div></div>
                </div>
                <button onclick="game.toMenu()" class="w-full bg-gradient-to-r from-gray-100 to-gray-300 hover:from-white hover:to-gray-100 text-black font-black py-4 rounded-xl active:scale-95 transition shadow-[0_0_20px_rgba(255,255,255,0.3)] text-lg uppercase tracking-widest border border-white/50">RETOUR MENU ğŸ </button>
            </div>
        </div>
    </div>
    <script type="module" src="src/js/main.js"></script>
</body>
</html>